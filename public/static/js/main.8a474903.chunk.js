(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{100:function(e,t,n){},129:function(e,t){},135:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(9),o=n.n(c),l=(n(100),n(10)),u=n(79),i=n.n(u),m=n(86),s=n(35),f=n(189),d=n(170),v=n(168),E=n(172),b=n(173),p=n(174),g=n(169),h=n(171),O=n(175),j=n(176),y=n(162),w=n(166),N=n(187);function x(e){var t=e.onClose,n=e.open,c=Object(a.useState)(""),o=Object(l.a)(c,2),u=o[0],i=o[1],m=Object(a.useState)(""),s=Object(l.a)(m,2),f=s[0],d=s[1],v=Object(a.useState)(""),E=Object(l.a)(v,2),b=E[0],p=E[1];return r.a.createElement(y.a,{onClose:function(){t(),i(""),d(""),p("")},open:n},r.a.createElement("form",{className:"flex column m-20",onSubmit:function(e){e.preventDefault(),u&&f&&t({roomName:u.toLocaleLowerCase().trim(),userName:f.toLocaleLowerCase().trim(),private:!!b,password:b})}},r.a.createElement(w.a,null,"\u041d\u043e\u0432\u0430\u044f \u043a\u043e\u043c\u043d\u0430\u0442\u0430"),r.a.createElement(N.a,{autoFocus:!0,margin:"normal",fullWidth:!0,placeholder:"\u041d\u0430\u0432\u0437\u0432\u0430\u043d\u0438\u0435 \u043a\u043e\u043c\u043d\u0430\u0442\u044b",required:!0,value:u,onInput:function(e){return i(e.target.value)}}),r.a.createElement(N.a,{margin:"normal",fullWidth:!0,placeholder:"\u041f\u0441\u0435\u0432\u0434\u043e\u043d\u0438\u043c",required:!0,value:f,onInput:function(e){return d(e.target.value)}}),r.a.createElement(N.a,{margin:"normal",fullWidth:!0,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",value:b,onInput:function(e){return p(e.target.value)}}),r.a.createElement(g.a,{type:"submit",variant:"contained",color:"primary",disabled:!(u&&u.length<11&&f&&f.length<11)},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c")))}function k(e){var t=e.onClose,n=e.open,c=e.room,o=Object(a.useState)(""),u=Object(l.a)(o,2),i=u[0],m=u[1],s=Object(a.useState)(""),f=Object(l.a)(s,2),d=f[0],v=f[1];return r.a.createElement(y.a,{onClose:function(){t(),m(""),v("")},open:n},r.a.createElement("form",{className:"flex column m-20",onSubmit:function(e){e.preventDefault(),i&&t({roomName:c.name,userName:i.toLocaleLowerCase().trim(),private:c.private,password:d})}},r.a.createElement(w.a,null,"\u041f\u043e\u0434\u043a\u043b\u044e\u0447\u0435\u043d\u0438\u0435 \u043a \u043a\u043e\u043c\u043d\u0430\u0442\u0435"),r.a.createElement(N.a,{autoFocus:!0,margin:"normal",fullWidth:!0,placeholder:"\u041f\u0441\u0435\u0432\u0434\u043e\u043d\u0438\u043c",required:!0,value:i,onChange:function(e){return m(e.target.value)}}),c.private&&r.a.createElement(N.a,{margin:"normal",fullWidth:!0,placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",required:!0,value:d,onChange:function(e){return v(e.target.value)}}),r.a.createElement(g.a,{type:"submit",variant:"contained",color:"primary",disabled:!(i&&i.length<11&&(!c.private||d))},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c")))}function S(e){var t=e.socket,n=e.current,c=e.changeRoom,o=Object(a.useState)([]),u=Object(l.a)(o,2),i=u[0],y=u[1],w=Object(a.useState)(!1),N=Object(l.a)(w,2),S=N[0],C=N[1],I=Object(a.useState)(),L=Object(l.a)(I,2),H=L[0],W=L[1];return Object(a.useEffect)((function(){t.on("connected",(function(){return t.emit("get-rooms")})),t.on("return-rooms",(function(e){y(e),c(void 0,void 0)})),t.on("new-room",(function(e){return y((function(t){return[].concat(Object(s.a)(t),[e])}))})),t.on("change-room",(function(e){return y((function(t){return t.map((function(t){return t.name===e.name?e:t}))}))})),t.on("delete-room",(function(e){y((function(t){return t.filter((function(t){return t.name!==e}))})),n&&e===n.name&&c(void 0,void 0)})),t.on("come-room",(function(e){y((function(t){return t.map((function(t){return t.name===e.room.name?e.room:t}))})),c(e.room,e.user)}))}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(x,{open:S,onClose:function(e){e&&t.emit("create-room",e),C(!1)}}),H&&r.a.createElement(k,{open:void 0!==H,room:H,onClose:function(e){e&&t.emit("connect-room",e),W(void 0)}}),r.a.createElement(f.a,{variant:"permanent",className:"drawer"},r.a.createElement("div",{className:"flex row v-center"},r.a.createElement(m.a,{variant:"h6",className:"m-10"},"\u0421\u043f\u0438\u0441\u043e\u043a \u043a\u043e\u043c\u043d\u0430\u0442"),!n&&r.a.createElement(d.a,{color:"primary",onClick:function(){return C(!0)},size:"small",className:"m-10"},r.a.createElement(h.a,null))),r.a.createElement(v.a,null,i.map((function(e){return r.a.createElement(E.a,{button:!0,key:e.name},r.a.createElement(b.a,null,r.a.createElement(p.a,{color:"primary",badgeContent:e.users},e.private?r.a.createElement(O.a,null):r.a.createElement(j.a,null))),r.a.createElement(g.a,{variant:"contained",color:n&&n.name===e.name?"primary":"secondary",fullWidth:!0,onClick:function(){return!n&&W(e)}},e.name))})))))}var C=n(188),I=n(177),L=n(178),H=n(179),W=n(180);function D(e){var t=e.socket,n=Object(a.useState)(!1),c=Object(l.a)(n,2),o=c[0],u=c[1],i=Object(a.useState)(""),m=Object(l.a)(i,2),s=m[0],f=m[1],v=Object(a.useState)(),E=Object(l.a)(v,2),b=E[0],p=E[1];function g(e,t){p(e),f(t),u(!0)}return Object(a.useEffect)((function(){t.on("err",(function(e){return g("#d32f2f",e)})),t.on("word-err",(function(e){return g("#d32f2f",e)}))}),[]),r.a.createElement(C.a,{open:o,autoHideDuration:6e3,onClose:function(){return u(!1)}},r.a.createElement(I.a,{style:{background:b,color:"white"},message:r.a.createElement("span",{className:"flex row v-center"},"#d32f2f"===b&&r.a.createElement(L.a,{className:"m-10"}),"#43a047"===b&&r.a.createElement(H.a,{className:"m-10"}),s),action:[r.a.createElement(d.a,{key:b,color:"inherit",onClick:function(){return u(!1)}},r.a.createElement(W.a,null))]}))}var q=n(47),B=n(190),F=n(181);function R(e){var t=e.socket,n=e.user,c=e.room,o=e.updateRoom,u=Object(a.useState)(""),i=Object(l.a)(u,2),f=i[0],d=i[1],v=Object(a.useState)([]),E=Object(l.a)(v,2),b=E[0],h=E[1],O=Object(a.useState)(""),j=Object(l.a)(O,2),y=j[0],w=j[1],x=Object(a.useState)([]),k=Object(l.a)(x,2),S=k[0],C=k[1],I=Object(a.useState)(0),L=Object(l.a)(I,2),H=L[0],W=L[1],D=Object(a.useState)(),R=Object(l.a)(D,2),z=R[0],G=R[1],J=Object(a.useState)(!1),T=Object(l.a)(J,2),P=T[0],A=T[1];function K(){A(!1),clearInterval(z)}Object(a.useEffect)((function(){return t.emit("get-users",c.name),t.on("return-users",h),t.on("user-connected",(function(e){h((function(t){return[].concat(Object(s.a)(t),[e])}))})),t.on("user-disconnected",(function(e){h((function(t){return t.filter((function(t){return t.id!==e}))}))})),t.on("update-words",(function(e){o(e.room),h(e.users)})),t.on("send-message",(function(e){C((function(t){return[].concat(Object(s.a)(t),[e])}))})),t.on("word-err",(function(){return A(!0),void G(setInterval((function(){return W((function(e){return e-2}))}),1e3))})),window.addEventListener("resize",X),function(){return window.removeEventListener("resize",X)}}),[]),Object(a.useEffect)((function(){1===b.length&&P&&K(),b.length>1&&b.some((function(e){return n.id===e.id&&e.active}))&&!P&&(A(!0),W(100),G(setInterval((function(){return W((function(e){return e-2}))}),1e3)));var e=document.getElementById("words-body");e&&e.scrollTo(0,e.scrollHeight)}),[b]),Object(a.useEffect)((function(){H<0&&(K(),t.emit("skip-user",{roomName:c.name,userName:n.name}))}),[H]),Object(a.useEffect)((function(){var e=document.getElementById("message-body");e&&e.scrollTo(0,e.scrollHeight)}),[S]);var M=Object(a.useState)("unset"),Q=Object(l.a)(M,2),U=Q[0],V=Q[1];function X(){var e=document.getElementById("users-container");e&&V("calc(100vh - ".concat(e.offsetHeight,"px - 205px)"))}function Y(e){var t=b.find((function(t){return t.name===e}));return t?t.color:{}}return Object(a.useEffect)((function(){return X()})),r.a.createElement("div",{className:"flex column grow"},r.a.createElement("div",{className:"flex row dark-bg"},r.a.createElement(g.a,{className:"m-10",variant:"contained",color:"primary",onClick:function(){t.emit("disconnect-room",{roomName:c.name,userName:n.name}),o(void 0)}},"\u0412\u044b\u0439\u0442\u0438 \u0438\u0437 \u043a\u043e\u043c\u043d\u0430\u0442\u044b")),r.a.createElement("div",{className:"flex row h-center child-m-20-5 dark-bg border-t border-b",id:"users-container"},b.map((function(e){return r.a.createElement("div",{key:e.id},r.a.createElement(p.a,{color:"primary",badgeContent:e.score},r.a.createElement(B.a,{label:e.name,style:Object(q.a)({},e.color,{border:"1px solid"}),onClick:function(){return function(e){var t=y.substring(y.indexOf("<")+1,y.indexOf(">"));if(t){var n=t.split(",");n.includes(e)?(n=n.filter((function(t){return t!==e})),w((function(e){return"".concat(n.length>0?"<".concat(n.join(","),"> "):"").concat(e.substring(e.indexOf(">")+2))}))):(n.push(e),w((function(e){return"<".concat(n.join(","),"> ").concat(e.substring(e.indexOf(">")+2))})))}else w("<".concat(e,"> ").concat(y))}(e.name)}})))}))),r.a.createElement("div",{className:"flex grow"},r.a.createElement("div",{className:"flex column dark-bg",style:{flexGrow:3}},r.a.createElement("div",{className:"message-body",style:{maxHeight:"unset"!==U?"calc(".concat(U," + 4px)"):U,flexGrow:1},id:"message-body"},S.map((function(e,t){return r.a.createElement("div",{className:"message m-10",key:e.author+t,style:Object(q.a)({},Y(e.author))},r.a.createElement(m.a,{color:"inherit"},r.a.createElement("strong",null,e.author,e.to?" > ".concat(e.to):""),r.a.createElement("br",null),e.message))}))),r.a.createElement("form",{className:"input-form",onSubmit:function(e){return function(e){e.preventDefault();var a=y.substring(y.indexOf("<"),y.indexOf(">")+1),r=y.replace(a,"").trim();r&&(t.emit("send-message",{roomName:c.name,from:n.name,to:a.replace("<","").replace(">","").split(","),message:r}),w(""))}(e)}},r.a.createElement(N.a,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435...",variant:"outlined",margin:"normal",value:y,onInput:function(e){return w(e.target.value)},style:{width:"calc(100% - 40px)"}}))),r.a.createElement("div",{className:"flex column dark-bg",style:{flexGrow:1,maxWidth:"450px"}},r.a.createElement("div",{className:"message-body",style:{maxHeight:U},id:"words-body"},c.words.map((function(e){return r.a.createElement("div",{className:"message m-10",key:e.word,style:Object(q.a)({},Y(e.author))},r.a.createElement(m.a,{color:"inherit"},"".concat(e.author," :: ").concat(e.word)))}))),P?r.a.createElement(F.a,{variant:"determinate",value:H,color:"primary"}):r.a.createElement("div",{style:{minHeight:4}}),r.a.createElement("form",{className:"input-form",onSubmit:function(e){return function(e){e.preventDefault(),f&&(K(),"skip"===f||"\u043f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u044c"===f?(t.emit("skip-user",{roomName:c.name,userName:n.name}),d("")):(t.emit("send-word",{roomName:c.name,word:f}),d("")))}(e)}},r.a.createElement(N.a,{placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u043b\u043e\u0432\u043e...",disabled:!b.some((function(e){return n.id===e.id&&e.active}))||1===b.length,variant:"outlined",margin:"normal",value:f,onInput:function(e){return d(e.target.value.toLocaleLowerCase().trim())},style:{width:"calc(100% - 40px)"}}),b.some((function(e){return n.id===e.id&&e.active}))&&1!==b.length?null:r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"overlay shadow"}),r.a.createElement("div",{className:"overlay flex center"},r.a.createElement(m.a,{variant:"h5",color:"inherit"},1===b.length?"\u041e\u0436\u0438\u0434\u0430\u0439\u0442\u0435 \u0438\u0433\u0440\u043e\u043a\u043e\u0432":"\u0421\u0435\u0439\u0447\u0430\u0441 \u0445\u043e\u0434 ".concat(function(){var e=b.find((function(e){return e.active}));return e?"'".concat(e.name,"'"):"\u0434\u0440\u0443\u0433\u043e\u0433\u043e \u0438\u0433\u0440\u043e\u043a\u0430"}(),". \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u043f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435"))))))))}var z=n(184),G=n(182),J=n(183);function T(e){var t=e.onClose,n=e.open;return r.a.createElement(y.a,{onClose:function(){return t()},open:n},r.a.createElement(w.a,null,r.a.createElement(m.a,{variant:"h4"},"\u041f\u0440\u0430\u0432\u0438\u043b\u0430")),r.a.createElement(G.a,null,r.a.createElement(m.a,{align:"justify"},"\u0427\u0442\u043e\u0431\u044b \u043d\u0430\u0447\u0430\u0442\u044c \u0438\u0433\u0440\u0443, \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u043e\u0434\u043a\u043b\u044e\u0447\u0438\u0442\u044c\u0441\u044f \u043a \u043a\u043e\u043c\u043d\u0430\u0442\u0435 \u0438\u043b\u0438 \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0435\u0435."),r.a.createElement("br",null),r.a.createElement(m.a,{align:"justify"},'\u0418\u0433\u0440\u043e\u043a\u0438 \u0434\u043e\u043b\u0436\u043d\u044b \u043e\u0442\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u0441\u043b\u043e\u0432\u0430, \u043a\u0430\u0436\u0434\u043e\u0435 \u0438\u0437 \u043a\u043e\u0442\u043e\u0440\u044b\u0445 \u043d\u0430\u0447\u0438\u043d\u0430\u0435\u0442\u0441\u044f \u0441 \u043f\u043e\u0441\u043b\u0435\u0434\u043d\u0435\u0439 \u0431\u0443\u043a\u0432\u044b \u043f\u0440\u0435\u0434\u044b\u0434\u0443\u0449\u0435\u0433\u043e \u0441\u043b\u043e\u0432\u0430. \u0412 \u043f\u0440\u043e\u0442\u0438\u0432\u043d\u043e\u043c \u0441\u043b\u0443\u0447\u0430\u0435, \u043b\u0438\u0431\u043e \u043f\u0440\u0438 \u043e\u0442\u0441\u0443\u0442\u0441\u0432\u0438\u0438 \u0441\u043b\u043e\u0432\u0430 \u0432 \u0441\u043f\u0438\u0441\u043a\u0435 \u0440\u0430\u0437\u0440\u0435\u0448\u0435\u043d\u043d\u044b\u0445 (\u0442\u043e\u043b\u044c\u043a\u043e \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u044b\u0435 \u0432 \u0435\u0434\u0438\u043d\u0441\u0442\u0432\u0435\u043d\u043d\u043e\u043c \u0447\u0438\u0441\u043b\u0435), \u0431\u0443\u0434\u0435\u0442 \u0432\u044b\u0432\u0435\u0434\u0435\u043d\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435 \u043e\u0431 \u043e\u0448\u0438\u0431\u043a\u0435. \u0415\u0441\u043b\u0438 \u0438\u0433\u0440\u043e\u043a \u043d\u0435 \u043c\u043e\u0436\u0435\u0442 \u043f\u0440\u0438\u0434\u0443\u043c\u0430\u0442\u044c \u0441\u043b\u043e\u0432\u043e, \u0442\u043e \u043e\u043d \u043c\u043e\u0436\u0435\u0442 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c \u0441\u043b\u043e\u0432\u043e "skip" \u0438\u043b\u0438 "\u043f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u044c", \u0447\u0442\u043e\u0431\u044b \u043f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442\u044c \u0445\u043e\u0434. \u0415\u0441\u043b\u0438 \u0438\u0433\u0440\u043e\u043a \u043d\u0435 \u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442 \u043d\u0438\u0447\u0435\u0433\u043e \u0437\u0430 50 \u0441\u0435\u043a\u0443\u043d\u0434, \u0442\u043e \u043e\u043d \u0430\u0432\u0442\u043e\u043c\u0430\u0442\u0438\u0447\u0435\u0441\u043a\u0438 \u043f\u0440\u043e\u043f\u0443\u0441\u0442\u0438\u0442 \u0445\u043e\u0434.'),r.a.createElement("br",null),r.a.createElement(m.a,{align:"justify"},'\u0414\u043b\u044f \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438 \u043f\u0440\u0438\u0432\u0430\u0442\u043d\u043e\u0433\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043a\u043b\u0438\u043a\u043d\u0443\u0442\u044c \u043f\u043e \u0438\u043a\u043e\u043d\u043a\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f \u043b\u0438\u0431\u043e \u0432\u043f\u0438\u0441\u0430\u0442\u044c \u0432 \u043f\u043e\u043b\u0435 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u0435\u0433\u043e \u043d\u0438\u043a\u043d\u0435\u0439\u043c. \u041d\u0430\u043f\u0440\u0438\u043c\u0435\u0440: "#\u043d\u0438\u043a\u043d\u0435\u0439\u043c:: \u043f\u0440\u0438\u0432\u0435\u0442".')),r.a.createElement(J.a,null,r.a.createElement(g.a,{variant:"contained",color:"primary",onClick:function(){return t()}},"\u041e\u043a")))}var P=i()();var A=n(186),K=n(82),M=n(185),Q=n(46),U=Object(K.a)({palette:{type:"dark",primary:M.a,secondary:Q.a}});o.a.render(r.a.createElement(A.a,{theme:U},r.a.createElement((function(){var e=Object(a.useState)(),t=Object(l.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(),u=Object(l.a)(o,2),i=u[0],s=u[1],f=Object(a.useState)(!1),d=Object(l.a)(f,2),v=d[0],E=d[1];return r.a.createElement("div",{className:"flex column grow"},r.a.createElement("div",{className:"flex row v-center h-between header"},r.a.createElement("div",{className:"flex center"},r.a.createElement(m.a,{variant:"h6",color:"inherit"},'\u0427\u0430\u0442-\u0438\u0433\u0440\u0430 "\u0421\u041b\u041e\u0412\u0410"'),r.a.createElement(z.a,{style:{marginLeft:20,cursor:"pointer"},onClick:function(){return E(!0)}})),r.a.createElement(m.a,{variant:"h6",color:"inherit"},n&&i&&"\u041a\u043e\u043c\u043d\u0430\u0442\u0430 :: ".concat(n.name," - \u041d\u0438\u043a\u043d\u0435\u0439\u043c :: ").concat(i.name))),r.a.createElement("div",{className:"flex row grow"},r.a.createElement(S,{socket:P,current:n,changeRoom:function(e,t){c(e),s(t)}}),n&&i?r.a.createElement(R,{socket:P,user:i,room:n,updateRoom:c}):r.a.createElement("div",{className:"flex grow center dark-bg"},r.a.createElement(m.a,{variant:"h4",color:"textPrimary"},"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u043b\u0438 \u0441\u043e\u0437\u0434\u0430\u0439\u0442\u0435 \u043a\u043e\u043c\u043d\u0430\u0442\u0443 :\u0441"))),r.a.createElement(D,{socket:P}),r.a.createElement(T,{open:v,onClose:function(){return E(!1)}}))}),null)),document.getElementById("root"))},95:function(e,t,n){e.exports=n(135)}},[[95,1,2]]]);
//# sourceMappingURL=main.8a474903.chunk.js.map